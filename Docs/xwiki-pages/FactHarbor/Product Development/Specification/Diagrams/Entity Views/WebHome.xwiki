{{info}}
**Multi-View Entity Reference** — Five complementary ERD views of the FactHarbor entity landscape. Each view highlights a different aspect: overview, analysis result, target database, runtime processing, and UI visibility.

**Source of truth**: ##apps/web/src/lib/analyzer/types.ts##, ##apps/api/Data/Entities.cs##, ##config-schemas.ts##

Created 2026-02-10.
{{/info}}

= Entity Views =

Five views of the same entity landscape, each serving a different audience and purpose.

|= View |= Purpose |= Audience
| **[[Overview>>||anchor="HOverviewERD"]]** | Bird's-eye view of all entity groups | Everyone (entry point)
| **[[Analysis Result>>||anchor="HAnalysisResultEntities"]]** | Everything persisted in ##resultJson## | Developers, data architects
| **[[Target Database>>||anchor="HTargetDatabaseEntities"]]** | Future PostgreSQL table design | Database architects, backend developers
| **[[Runtime Process>>||anchor="HRuntimeProcessEntities"]]** | Transient entities during pipeline execution | Pipeline developers
| **[[UI Visible>>||anchor="HUI-VisibleEntities"]]** | What users see in the browser | Frontend developers, UX designers

=== Color Legend ===

All views use a consistent color scheme:

|= Color |= Meaning
| (% style="background-color:#c8e6c9; padding:4px;" %)Green | Core analysis (verdicts, claims)
| (% style="background-color:#e3f2fd; padding:4px;" %)Blue | Infrastructure (jobs, config, metrics)
| (% style="background-color:#fff3e0; padding:4px;" %)Orange | Evidence and sources
| (% style="background-color:#e1bee7; padding:4px;" %)Purple | Understanding and decomposition
| (% style="background-color:#fff9c4; padding:4px;" %)Yellow | Quality and validation
| (% style="background-color:#f5f5f5; padding:4px;" %)Grey | Runtime-only / transient
| (% style="background-color:#ffcdd2; padding:4px;" %)Red | Planned / not yet implemented

----

== Overview ERD ==

Bird's-eye view showing all major entity groups and their primary relationships. Minimal field detail — use the other views for field-level information.

{{mermaid}}

erDiagram
    JOB ||--|| ANALYSIS_RESULT : produces
    JOB ||--o{ JOB_EVENT : logs
    JOB }o--|| CONFIG_SNAPSHOT : uses

    ANALYSIS_RESULT ||--|| CLAIM_UNDERSTANDING : contains
    ANALYSIS_RESULT ||--o{ CLAIM_VERDICT : contains
    ANALYSIS_RESULT ||--|| ARTICLE_ANALYSIS : aggregates
    ANALYSIS_RESULT ||--o{ EVIDENCE_ITEM : contains
    ANALYSIS_RESULT ||--o{ FETCHED_SOURCE : contains
    ANALYSIS_RESULT ||--|| QUALITY_GATES : validated_by
    ANALYSIS_RESULT ||--|| TWO_PANEL_SUMMARY : summarized_as

    CLAIM_UNDERSTANDING ||--o{ ANALYSIS_CONTEXT : detects
    CLAIM_UNDERSTANDING ||--o{ SUB_CLAIM : decomposes_into
    CLAIM_UNDERSTANDING ||--o{ KEY_FACTOR : discovers

    CLAIM_VERDICT }o--o{ EVIDENCE_ITEM : supported_by
    CLAIM_VERDICT }o--o| ANALYSIS_CONTEXT : evaluated_in
    EVIDENCE_ITEM }o--|| FETCHED_SOURCE : extracted_from

    ARTICLE_ANALYSIS ||--o{ CONTEXT_ANSWER : per_context
    CONTEXT_ANSWER }o--|| ANALYSIS_CONTEXT : answers

    JOB {
        string jobId_PK
        string status
        string pipelineVariant
    }

    ANALYSIS_RESULT {
        string schemaVersion
        json meta
    }

    CLAIM_UNDERSTANDING {
        string detectedInputType
        string articleThesis
        string riskTier
    }

    SUB_CLAIM {
        string id_PK
        string text
        string centrality
    }

    ANALYSIS_CONTEXT {
        string id_PK
        string name
        string status
    }

    KEY_FACTOR {
        string question
        string supports
    }

    CLAIM_VERDICT {
        string claimId_PK
        int truthPercentage
        int confidence
        string verdict
    }

    EVIDENCE_ITEM {
        string id_PK
        string statement
        string probativeValue
    }

    FETCHED_SOURCE {
        string id_PK
        string url
        float trackRecordScore
    }

    ARTICLE_ANALYSIS {
        int articleTruthPercentage
        string articleVerdict
        boolean isPseudoscience
    }

    CONTEXT_ANSWER {
        string contextId_FK
        int truthPercentage
        string shortAnswer
    }

    QUALITY_GATES {
        boolean passed
        json gate1Stats
        json gate4Stats
    }

    TWO_PANEL_SUMMARY {
        json articleSummary
        json factharborAnalysis
    }

    CONFIG_SNAPSHOT {
        text hash_PK
        text config_type
    }

    JOB_EVENT {
        long id_PK
        string jobId_FK
        string level
        string message
    }

{{/mermaid}}

//Overview: JOB produces an ANALYSIS_RESULT containing decomposed claims (CLAIM_UNDERSTANDING), per-claim verdicts (CLAIM_VERDICT) supported by evidence (EVIDENCE_ITEM) from web sources (FETCHED_SOURCE), aggregated into an overall analysis (ARTICLE_ANALYSIS) with per-context answers (CONTEXT_ANSWER). Quality validation (QUALITY_GATES) and a user-facing summary (TWO_PANEL_SUMMARY) complete the result. Runtime entities (ResearchState, BudgetTracker, MetricsCollector, LLM text analysis types) exist during processing only and are not shown here — see [[Runtime Process View>>||anchor="HRuntimeProcessEntities"]].//

----

== Analysis Result Entities ==

Everything persisted in the ##resultJson## blob at the end of an analysis. This is the complete entity model inside the JSON. Grouped by pipeline phase.

=== Understanding Phase ===

{{mermaid}}

erDiagram
    CLAIM_UNDERSTANDING ||--o{ SUB_CLAIM : decomposes_into
    CLAIM_UNDERSTANDING ||--o{ ANALYSIS_CONTEXT : detects
    CLAIM_UNDERSTANDING ||--o{ KEY_FACTOR_DEF : discovers

    SUB_CLAIM }o--o| ANALYSIS_CONTEXT : scoped_to
    SUB_CLAIM }o--o| KEY_FACTOR_DEF : addresses

    CLAIM_UNDERSTANDING {
        string detectedInputType
        string impliedClaim
        string articleThesis
        string backgroundDetails
        string riskTier
        boolean requiresSeparateAnalysis
        json distinctEvents
        json legalFrameworks
        json researchQuestions
    }

    SUB_CLAIM {
        string id_PK
        string text
        string type
        string claimRole
        string centrality
        string harmPotential
        boolean isCentral
        string contextId_FK
        string keyFactorId_FK
        json dependsOn
        json keyEntities
        string checkWorthiness
    }

    ANALYSIS_CONTEXT {
        string id_PK
        string name
        string shortName
        string subject
        string temporal
        string status
        string outcome
        string assessedStatement
        json metadata
    }

    KEY_FACTOR_DEF {
        string id_PK
        string question
        string factor
        string category
    }

{{/mermaid}}

//Understanding phase: Input is decomposed into SUB_CLAIMs scoped to detected ANALYSIS_CONTEXTs with KEY_FACTOR definitions. The CLAIM_UNDERSTANDING container captures the overall input interpretation.//

=== Research Phase ===

{{mermaid}}

erDiagram
    EVIDENCE_ITEM }o--|| FETCHED_SOURCE : extracted_from
    EVIDENCE_ITEM ||--o| EVIDENCE_SCOPE : has_scope

    SEARCH_QUERY ||--o{ FETCHED_SOURCE : found
    RESEARCH_ITERATION ||--o{ SEARCH_QUERY : performed

    EVIDENCE_ITEM {
        string id_PK
        string statement
        string category
        string sourceId_FK
        string sourceUrl
        string sourceTitle
        string sourceExcerpt
        string contextId_FK
        string claimDirection
        string probativeValue
        string sourceAuthority
        string evidenceBasis
        int extractionConfidence
        boolean fromOppositeClaimSearch
    }

    EVIDENCE_SCOPE {
        string name
        string methodology
        string boundaries
        string geographic
        string temporal
        string sourceType
    }

    FETCHED_SOURCE {
        string id_PK
        string url
        string title
        float trackRecordScore
        float trackRecordConfidence
        boolean trackRecordConsensus
        string category
        boolean fetchSuccess
        string searchQuery
    }

    SEARCH_QUERY {
        string query
        int iteration
        string focus
        int resultsCount
        string searchProvider
        string timestamp
        string error
    }

    RESEARCH_ITERATION {
        int number
        string focus
        json queries
        int sourcesFound
        int evidenceItemsExtracted
    }

{{/mermaid}}

//Research phase: SEARCH_QUERYs are executed in RESEARCH_ITERATIONs, finding FETCHED_SOURCEs from which EVIDENCE_ITEMs are extracted. Each evidence item may have an EVIDENCE_SCOPE capturing the source document's methodology and boundaries.//

=== Verdict and Aggregation Phase ===

{{mermaid}}

erDiagram
    CLAIM_VERDICT }o--o{ EVIDENCE_ITEM : supported_by
    CLAIM_VERDICT }o--o| ANALYSIS_CONTEXT : evaluated_in
    CLAIM_VERDICT }o--o| KEY_FACTOR_DEF : addresses

    ARTICLE_ANALYSIS ||--o{ CONTEXT_ANSWER : per_context
    CONTEXT_ANSWER }o--|| ANALYSIS_CONTEXT : answers
    CONTEXT_ANSWER ||--o{ KEY_FACTOR_VERDICT : contains

    KEY_FACTOR_VERDICT ||--o| FACTOR_ANALYSIS : aggregated_in

    CLAIM_VERDICT {
        string claimId_PK
        string claimText
        int truthPercentage
        int confidence
        string verdict
        string riskTier
        string reasoning
        json supportingEvidenceIds
        string contextId_FK
        string keyFactorId_FK
        boolean isCentral
        string centrality
        string harmPotential
        string thesisRelevance
        boolean isContested
        string contestedBy
        string factualBasis
        boolean isCounterClaim
        json evidenceQuality
    }

    ARTICLE_ANALYSIS {
        string inputType
        int articleTruthPercentage
        int articleVerdict
        string articleVerdictReason
        string articleVerdictReliability
        boolean hasMultipleContexts
        boolean isPseudoscience
        json claimPattern
        json logicalFallacies
    }

    CONTEXT_ANSWER {
        string contextId_FK
        string contextName
        int truthPercentage
        int confidence
        string shortAnswer
    }

    KEY_FACTOR_VERDICT {
        string factor
        string supports
        string explanation
        boolean isContested
        string contestedBy
        string factualBasis
    }

    FACTOR_ANALYSIS {
        int positiveFactors
        int negativeFactors
        int neutralFactors
        int contestedNegatives
        string verdictExplanation
    }

{{/mermaid}}

//Verdict phase: CLAIM_VERDICTs reference supporting EVIDENCE_ITEMs and are scoped to ANALYSIS_CONTEXTs. ARTICLE_ANALYSIS aggregates all verdicts. CONTEXT_ANSWERs provide per-context verdicts with KEY_FACTOR_VERDICTs and FACTOR_ANALYSIS.//

=== Quality and Output ===

{{mermaid}}

erDiagram
    QUALITY_GATES ||--o| GATE1_STATS : claim_validation
    QUALITY_GATES ||--o| GATE4_STATS : verdict_confidence
    QUALITY_GATES ||--o| QUALITY_SUMMARY : summarizes

    QUALITY_GATES {
        boolean passed
    }

    GATE1_STATS {
        int total
        int passed
        int filtered
        int centralKept
    }

    GATE4_STATS {
        int total
        int publishable
        int highConfidence
        int mediumConfidence
        int lowConfidence
        int insufficient
        int centralKept
    }

    QUALITY_SUMMARY {
        int totalEvidenceItems
        int totalSources
        int searchesPerformed
        boolean contradictionSearchPerformed
    }

    ANALYSIS_WARNING {
        string type
        string severity
        string message
        json details
    }

    TWO_PANEL_SUMMARY {
        json articleSummary
        json factharborAnalysis
    }

    PSEUDOSCIENCE_ANALYSIS {
        boolean isPseudoscience
        int confidence
        json categories
        json matchedPatterns
        json debunkIndicatorsFound
    }

{{/mermaid}}

//Quality and output: QUALITY_GATES track claim validation (GATE1) and verdict confidence (GATE4). ANALYSIS_WARNINGs surface quality issues. TWO_PANEL_SUMMARY provides the user-facing narrative. PSEUDOSCIENCE_ANALYSIS flags pseudoscientific content.//

----

== Target Database Entities ==

Entities that should become PostgreSQL tables in the target architecture. Color indicates implementation status: green = exists as table, blue = target (currently in JSON blob), red = planned but not implemented.

{{mermaid}}

erDiagram
    JOBS ||--o{ JOB_EVENTS : logs
    JOBS ||--o| ANALYSIS_METRICS : tracked_by
    JOBS ||--o{ CONFIG_USAGE : snapshot
    CONFIG_USAGE }o--|| CONFIG_BLOBS : references
    CONFIG_ACTIVE }o--|| CONFIG_BLOBS : points_to

    JOBS ||--o{ CLAIM_VERDICTS : produces
    JOBS ||--o{ EVIDENCE_ITEMS : produces
    JOBS ||--o{ FETCHED_SOURCES : produces
    JOBS ||--o{ ANALYSIS_CONTEXTS : produces

    CLAIM_VERDICTS }o--o{ EVIDENCE_ITEMS : supported_by
    CLAIM_VERDICTS }o--o| ANALYSIS_CONTEXTS : scoped_to
    EVIDENCE_ITEMS }o--|| FETCHED_SOURCES : from
    EVIDENCE_ITEMS }o--o| ANALYSIS_CONTEXTS : scoped_to
    FETCHED_SOURCES }o--o| SOURCE_RELIABILITY : cached_score

    USERS ||--o{ FLAGS : reports
    FLAGS }o--|| JOBS : targets

    JOBS {
        string JobId_PK
        string Status
        int Progress
        string InputType
        string InputValue
        string PipelineVariant
        datetime CreatedUtc
        datetime UpdatedUtc
        json ResultJson
        text ReportMarkdown
    }

    JOB_EVENTS {
        long Id_PK
        string JobId_FK
        datetime TsUtc
        string Level
        string Message
    }

    ANALYSIS_METRICS {
        guid Id_PK
        string JobId_FK
        json MetricsJson
        datetime CreatedUtc
    }

    CONFIG_BLOBS {
        text hash_PK
        text config_type
        json content
        text changed_by
        text change_reason
        datetime created_at
    }

    CONFIG_ACTIVE {
        text config_type_PK
        text blob_hash_FK
        datetime activated_at
    }

    CONFIG_USAGE {
        string job_id_FK
        text config_type
        text blob_hash_FK
        datetime snapshot_at
    }

    SOURCE_RELIABILITY {
        text domain_PK
        float score
        float confidence
        boolean consensus
        datetime evaluated_at
        int ttl_days
    }

    CLAIM_VERDICTS {
        string claimId_PK
        string jobId_FK
        string claimText
        string type
        int truthPercentage
        int confidence
        string verdict
        string reasoning
        json supportingEvidenceIds
        string contextId_FK
        string keyFactorId
        boolean isContested
        string factualBasis
        json evidence_summary_CACHE
    }

    EVIDENCE_ITEMS {
        string id_PK
        string jobId_FK
        string statement
        string category
        string sourceId_FK
        string probativeValue
        string sourceAuthority
        string evidenceBasis
        string claimDirection
        int extractionConfidence
    }

    FETCHED_SOURCES {
        string id_PK
        string jobId_FK
        string url
        string domain
        string title
        float trackRecordScore
        boolean fetchSuccess
        datetime fetchedAt
    }

    ANALYSIS_CONTEXTS {
        string id_PK
        string jobId_FK
        string name
        string shortName
        string subject
        string status
        string outcome
        json metadata_JSONB
    }

    USERS {
        uuid id_PK
        string username
        string email
        string role
        datetime created_at
    }

    FLAGS {
        uuid id_PK
        string entity_type
        string entity_id_FK
        uuid reported_by_FK
        string issue_type
        string status
    }

    QUALITY_METRICS {
        uuid id_PK
        string metric_type
        string category
        float value
        float target
        datetime timestamp
    }

{{/mermaid}}

=== Implementation Status ===

|= Table |= Status |= Technology |= Notes
| ##jobs## | Exists | .NET EF Core (SQLite) | Analysis results stored as JSON blob in ##ResultJson##
| ##job_events## | Exists | .NET EF Core (SQLite) | Event log with SSE streaming
| ##analysis_metrics## | Exists | .NET EF Core (SQLite) | Metrics as JSON blob
| ##config_blobs## | Exists | Next.js better-sqlite3 | Immutable, content-addressed
| ##config_active## | Exists | Next.js better-sqlite3 | Activation pointers
| ##config_usage## | Exists | Next.js better-sqlite3 | Per-job config snapshots
| ##source_reliability## | Exists | Next.js better-sqlite3 | LLM-evaluated cache (90-day TTL)
| ##claim_verdicts## | **Target** | PostgreSQL | Normalised from JSON blob
| ##evidence_items## | **Target** | PostgreSQL | Normalised from JSON blob
| ##fetched_sources## | **Target** | PostgreSQL | Normalised from JSON blob
| ##analysis_contexts## | **Target** | PostgreSQL | Normalised from JSON blob
| ##users## | **Planned** | PostgreSQL | Not yet implemented (Alpha phase)
| ##flags## | **Planned** | PostgreSQL | Not yet implemented (Alpha phase)
| ##quality_metrics## | **Planned** | PostgreSQL | Not yet implemented (time-series)

For detailed field descriptions, denormalisation strategy, and cost projections, see [[Target Data Model>>FactHarbor.Product Development.Specification.Data Model.WebHome]].

----

== Runtime Process Entities ==

Entities that exist only during pipeline execution. These are transient — they facilitate processing but are not directly stored in the result JSON. Some contribute data that flows into stored entities.

{{mermaid}}

flowchart TD
    subgraph Understand["UNDERSTAND Phase"]
        ICR["InputClassificationResult\nisComparative, isCompound\nclaimType, complexity"]
        G1M["Gate1Metric\nclaims filtered stats"]
    end

    subgraph Research["RESEARCH Phase"]
        RS["ResearchState\n(main mutable container)\nunderstanding, evidenceItems\nsources, searchQueries, llmCalls"]
        RD["ResearchDecision\ncomplete, focus, queries\ntargetContextId"]
        EQR["EvidenceQualityResult\nqualityAssessment, issues\nreasoning (per evidence)"]
        PV["ProvenanceValidation\nURL validation, excerpt check"]
        BT["BudgetTracker\ntokens, iterations\nllmCalls, budgetExceeded"]
    end

    subgraph Refine["CONTEXT REFINE Phase"]
        CSR["ContextSimilarityResult\nsimilarity score, shouldMerge\ncanonicalName, phaseBucket"]
    end

    subgraph Verdict["VERDICT Phase"]
        VVR["VerdictValidationResult\nisInverted, polarity\nharmPotential, contestation"]
        G4M["Gate4Metric\nconfidence distribution"]
    end

    subgraph Metrics["METRICS (Full Pipeline)"]
        MC["MetricsCollector\naccumulates all telemetry"]
        LCM["LLMCallMetric\ntokens, duration, success"]
        SQM["SearchQueryMetric\nquery, provider, duration"]
        FT["FallbackTracker\nclassification failures"]
    end

    ICR -->|"data flows into"| CU["ClaimUnderstanding\n(STORED in result)"]
    G1M -->|"summary"| QG["gate1Stats\n(STORED in result)"]
    EQR -->|"filters"| EI["EvidenceItems\n(STORED in result)"]
    PV -->|"filters"| EI
    CSR -->|"merges"| AC["AnalysisContexts\n(STORED in result)"]
    VVR -->|"corrects"| CV["ClaimVerdicts\n(STORED in result)"]
    G4M -->|"summary"| QG4["gate4Stats\n(STORED in result)"]
    BT -->|"summary"| BS["meta.budgetStats\n(STORED in result)"]
    RD -->|"discarded"| DISC["Discarded"]
    MC -->|"sent to API"| AM["AnalysisMetrics\n(STORED in separate DB)"]
    LCM --> MC
    SQM --> MC
    FT -->|"if non-empty"| CF["classificationFallbacks\n(STORED in result)"]
    RS -->|"fields flow into"| RES["resultJson fields\n(STORED in result)"]

    style CU fill:#c8e6c9,stroke:#2e7d32,color:#000
    style QG fill:#fff9c4,stroke:#f9a825,color:#000
    style EI fill:#fff3e0,stroke:#e65100,color:#000
    style AC fill:#e1bee7,stroke:#7b1fa2,color:#000
    style CV fill:#c8e6c9,stroke:#2e7d32,color:#000
    style QG4 fill:#fff9c4,stroke:#f9a825,color:#000
    style BS fill:#e3f2fd,stroke:#1565c0,color:#000
    style AM fill:#e3f2fd,stroke:#1565c0,color:#000
    style CF fill:#fff9c4,stroke:#f9a825,color:#000
    style RES fill:#c8e6c9,stroke:#2e7d32,color:#000
    style DISC fill:#f5f5f5,stroke:#9e9e9e,color:#666

    style ICR fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style G1M fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style RS fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style RD fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style EQR fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style PV fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style BT fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style CSR fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style VVR fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style G4M fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style MC fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style LCM fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style SQM fill:#f5f5f5,stroke:#9e9e9e,color:#000
    style FT fill:#f5f5f5,stroke:#9e9e9e,color:#000

{{/mermaid}}

//Grey boxes = transient runtime entities. Colored boxes = stored destinations. Arrows show how runtime data flows into (or is discarded from) the final result. Source files: ##text-analysis-types.ts##, ##metrics.ts##, ##budgets.ts##, ##orchestrated.ts##.//

=== Runtime Entity Reference ===

|= Entity |= Source File |= Lifecycle |= Destination
| ##ResearchState## | ##orchestrated.ts## | Full pipeline | Container — fields distributed into resultJson
| ##BudgetTracker## | ##budgets.ts## | Full pipeline | ##meta.budgetStats##
| ##FallbackTracker## | ##orchestrated.ts## | Full pipeline | ##classificationFallbacks## (if non-empty)
| ##ResearchDecision## | ##types.ts## | Per iteration | Discarded after use
| ##InputClassificationResult## | ##text-analysis-types.ts## | Understand phase | Data flows into ##ClaimUnderstanding##
| ##EvidenceQualityResult## | ##text-analysis-types.ts## | Research phase | Filters ##EvidenceItems## (pass/fail)
| ##ContextSimilarityResult## | ##text-analysis-types.ts## | Refine phase | Merges ##AnalysisContexts##
| ##VerdictValidationResult## | ##text-analysis-types.ts## | Verdict phase | Corrects ##ClaimVerdicts##
| ##MetricsCollector## | ##metrics.ts## | Full pipeline | ##AnalysisMetrics## (separate DB)
| ##LLMCallMetric## | ##metrics.ts## | Per LLM call | Aggregated in ##MetricsCollector##
| ##SearchQueryMetric## | ##metrics.ts## | Per search call | Aggregated in ##MetricsCollector##
| ##ProvenanceValidation## | ##orchestrated.ts## | Research phase | Filters evidence (pass/fail)
| ##Gate1Metric## | ##metrics.ts## | Understand phase | ##gate1Stats## in ##QualityGates##
| ##Gate4Metric## | ##metrics.ts## | Verdict phase | ##gate4Stats## in ##QualityGates##

----

== UI-Visible Entities ==

Entities and fields that surface to users in the browser. Grouped by UI page.

{{mermaid}}

flowchart TD
    subgraph JobsList["/jobs — Jobs List Page"]
        JL_JOB["JOB\nstatus, progress\ninputPreview\npipelineVariant\ncreatedUtc"]
    end

    subgraph JobDetail["/jobs/[id] — Job Detail Page"]

        subgraph VerdictBanner["Verdict Banner"]
            JD_AA["ARTICLE_ANALYSIS\narticleTruthPercentage\narticleVerdict\nclaimPattern\nisPseudoscience"]
            JD_TPS["TWO_PANEL_SUMMARY\narticleSummary\nfactharborAnalysis"]
        end

        subgraph ContextSection["Context Verdicts"]
            JD_CTX["ANALYSIS_CONTEXT\nname, subject\ntemporal, outcome"]
            JD_CA["CONTEXT_ANSWER\ntruthPercentage, confidence\nshortAnswer"]
            JD_KF["KEY_FACTOR\nfactor, supports\nexplanation, isContested"]
        end

        subgraph ClaimsSection["Claims Analyzed"]
            JD_CV["CLAIM_VERDICT\nclaimText, verdict\nconfidence, reasoning\nisCentral, isContested"]
        end

        subgraph EvidenceSection["Evidence Panel"]
            JD_EI["EVIDENCE_ITEM\nstatement, category\nsourceTitle, claimDirection\nprobativeValue"]
            JD_ES["EVIDENCE_SCOPE\n(tooltip: methodology\nboundaries, geographic)"]
        end

        subgraph SourcesSection["Sources Tab"]
            JD_FS["FETCHED_SOURCE\nurl, title\ntrackRecordScore\nfetchSuccess"]
        end

        subgraph QualitySection["Quality Panel"]
            JD_QG["QUALITY_GATES\npassed, gate1Stats\ngate4Stats, summary"]
            JD_AW["ANALYSIS_WARNING\ntype, severity\nmessage"]
        end

        subgraph SearchSection["Search Queries"]
            JD_SQ["SEARCH_QUERY\nquery, resultsCount\nsearchProvider"]
        end
    end

    subgraph Admin["/admin — Admin Pages"]
        AD_HEALTH["Provider Health\nstate, consecutiveFailures"]
        AD_METRICS["ANALYSIS_METRICS\navgDuration, avgCost\ngate1PassRate\ngate4HighConfidenceRate"]
        AD_CONFIG["CONFIG_SNAPSHOT\npipelineConfig\nsearchConfig"]
    end

    JL_JOB -->|"click job"| JobDetail
    JD_CV -->|"references"| JD_EI
    JD_EI -->|"from"| JD_FS
    JD_CTX -->|"verdict"| JD_CA
    JD_CA -->|"factors"| JD_KF

    style JL_JOB fill:#e3f2fd,stroke:#1565c0,color:#000
    style JD_AA fill:#c8e6c9,stroke:#2e7d32,color:#000
    style JD_TPS fill:#c8e6c9,stroke:#2e7d32,color:#000
    style JD_CTX fill:#e1bee7,stroke:#7b1fa2,color:#000
    style JD_CA fill:#c8e6c9,stroke:#2e7d32,color:#000
    style JD_KF fill:#e1bee7,stroke:#7b1fa2,color:#000
    style JD_CV fill:#c8e6c9,stroke:#2e7d32,color:#000
    style JD_EI fill:#fff3e0,stroke:#e65100,color:#000
    style JD_ES fill:#fff3e0,stroke:#e65100,color:#000
    style JD_FS fill:#fff3e0,stroke:#e65100,color:#000
    style JD_QG fill:#fff9c4,stroke:#f9a825,color:#000
    style JD_AW fill:#fff9c4,stroke:#f9a825,color:#000
    style JD_SQ fill:#fff3e0,stroke:#e65100,color:#000
    style AD_HEALTH fill:#e3f2fd,stroke:#1565c0,color:#000
    style AD_METRICS fill:#e3f2fd,stroke:#1565c0,color:#000
    style AD_CONFIG fill:#e3f2fd,stroke:#1565c0,color:#000

{{/mermaid}}

//UI visibility: The Jobs list shows minimal JOB metadata. The Job detail page renders the full analysis result across multiple sections. Admin pages show operational data (provider health, aggregated metrics, config snapshots). Entities not shown here (e.g., ResearchState, BudgetTracker) are internal processing entities never rendered in UI.//

=== What Users See vs. What's Internal ===

|= Entity |= User-Visible Fields |= Internal-Only Fields
| **ClaimVerdict** | claimText, verdict, confidence, reasoning, isContested | riskTier, evidenceWeight, startOffset, endOffset, highlightColor
| **EvidenceItem** | statement, category, sourceTitle, claimDirection, probativeValue | sourceId, extractionConfidence, isContestedClaim, claimSource
| **FetchedSource** | url, title, trackRecordScore | fullText, fetchedAt, searchQuery
| **AnalysisContext** | name, subject, temporal, outcome | id, metadata (partial — domain-specific fields shown contextually)
| **QualityGates** | passed, gate1Stats (counts), gate4Stats (counts) | Individual ClaimValidationResult, VerdictValidationResult per claim

----

**Navigation:** [[Diagrams Index>>FactHarbor.Product Development.Specification.Diagrams.WebHome]] | [[Architecture Data Model>>FactHarbor.Product Development.Specification.Architecture.Data Model.WebHome]] | [[Target Data Model>>FactHarbor.Product Development.Specification.Data Model.WebHome]]
