{{info}}
**Current Implementation (CB Pipeline v2.11.0+)** — The complete analysis entity hierarchy from input through verdict to overall assessment. Source of truth: ##apps/web/src/lib/analyzer/types.ts## (CB pipeline interfaces).

Updated 2026-02-19. Replaces Orchestrated-era entities (CLAIM_UNDERSTANDING, ANALYSIS_CONTEXT, SUB_CLAIM, KEY_FACTOR_DEF, CONTEXT_ANSWER — all removed in v2.11.0).
{{/info}}

= Analysis Entity Model (CB Pipeline) =

{{mermaid}}
erDiagram
    CB_CLAIM_UNDERSTANDING ||--o{ ATOMIC_CLAIM : "extracts"
    CB_CLAIM_UNDERSTANDING ||--|| GATE_1_STATS : "produces"

    ATOMIC_CLAIM ||--o{ CB_CLAIM_VERDICT : "receives"

    CB_CLAIM_VERDICT ||--o{ BOUNDARY_FINDING : "contains"
    CB_CLAIM_VERDICT ||--|| CONSISTENCY_RESULT : "has"
    CB_CLAIM_VERDICT ||--o{ CHALLENGE_RESPONSE : "has"
    CB_CLAIM_VERDICT }o--o{ EVIDENCE_ITEM : "cites"

    EVIDENCE_ITEM }o--|| FETCHED_SOURCE : "from"
    EVIDENCE_ITEM ||--|| EVIDENCE_SCOPE : "has scope"

    EVIDENCE_SCOPE }o--|| CLAIM_BOUNDARY : "clusters into"
    EVIDENCE_ITEM }o--|| CLAIM_BOUNDARY : "assigned to"

    BOUNDARY_FINDING }o--|| CLAIM_BOUNDARY : "per boundary"

    OVERALL_ASSESSMENT ||--o{ CB_CLAIM_VERDICT : "aggregates"
    OVERALL_ASSESSMENT ||--o{ CLAIM_BOUNDARY : "presents"
    OVERALL_ASSESSMENT ||--|| VERDICT_NARRATIVE : "has"
    OVERALL_ASSESSMENT ||--|| COVERAGE_MATRIX : "has"
    OVERALL_ASSESSMENT ||--|| QUALITY_GATES : "has"

    CB_CLAIM_UNDERSTANDING {
        string detectedInputType "claim or article"
        string impliedClaim "LLM-extracted thesis"
        string articleThesis "Article thesis"
        string backgroundDetails "Broader frame"
        string riskTier "A B or C"
        json distinctEvents "Name date description"
    }

    ATOMIC_CLAIM {
        string id PK "AC_01 AC_02"
        string statement "Verifiable assertion"
        string category "factual evaluative procedural"
        string centrality "high medium"
        string harmPotential "critical high medium low"
        boolean isCentral "Always true (filtered)"
        string claimDirection "supports_thesis contradicts_thesis contextual"
        string_array keyEntities "Named entities"
        float specificityScore "0-1"
        string groundingQuality "strong moderate weak none"
        json expectedEvidenceProfile "methodologies metrics sourceTypes"
    }

    GATE_1_STATS {
        int totalClaims
        int passedOpinion
        int passedSpecificity
        int passedFidelity "Fidelity to original input"
        int filteredCount
        boolean overallPass
    }

    CB_CLAIM_VERDICT {
        string id PK
        string claimId FK
        float truthPercentage "0-100"
        string verdict "7-point scale label"
        float confidence "0-100"
        string reasoning "Includes challenge responses"
        string harmPotential "critical high medium low"
        boolean isContested
        string_array supportingEvidenceIds FK
        string_array contradictingEvidenceIds FK
    }

    BOUNDARY_FINDING {
        string boundaryId FK
        string boundaryName
        float truthPercentage "Per-boundary 0-100"
        float confidence "Per-boundary 0-100"
        string evidenceDirection "supports contradicts mixed neutral"
        int evidenceCount
    }

    CONSISTENCY_RESULT {
        string claimId FK
        float_array percentages "Truth pct from each run"
        float average
        float spread "max minus min"
        boolean stable "spread below threshold"
        boolean assessed "false if skipped"
    }

    CHALLENGE_RESPONSE {
        string challengeType "assumption missing_evidence methodology_weakness independence_concern"
        string response "Reconciler response"
        boolean verdictAdjusted "Whether verdict changed"
    }

    EVIDENCE_ITEM {
        string id PK "EV_001 EV_002"
        string statement "Extracted evidence text"
        string category "statistic expert_quote event legal_provision etc"
        string sourceId FK
        string sourceUrl
        string claimDirection "supports contradicts neutral"
        string probativeValue "high medium low"
        string claimBoundaryId FK "Assigned in Stage 3"
        string_array relevantClaimIds "Related claims"
        boolean isDerivative "Cites another source study"
    }

    EVIDENCE_SCOPE {
        string name "Short label"
        string methodology "Optional"
        string temporal "Optional"
        string boundaries "Included or excluded"
        string geographic "Source data region"
        string sourceType "peer_reviewed_study etc"
        map additionalDimensions "Domain-specific"
    }

    FETCHED_SOURCE {
        string id PK
        string url
        string title
        float trackRecordScore "0.0-1.0"
        boolean fetchSuccess
    }

    CLAIM_BOUNDARY {
        string id PK "CB_01 CB_02"
        string name "Human-readable label"
        string shortName "Short label for UI"
        string description
        string methodology "Dominant methodology"
        float internalCoherence "0-1"
        int evidenceCount
    }

    VERDICT_NARRATIVE {
        string headline "One sentence finding"
        string evidenceBaseSummary "Quantitative summary"
        string keyFinding "Main synthesis 2-3 sentences"
        string_array boundaryDisagreements "Where boundaries diverge"
        string limitations "What could not be determined"
    }

    COVERAGE_MATRIX {
        string_array claims "Claim IDs (rows)"
        string_array boundaries "Boundary IDs (columns)"
        int_array_array counts "Evidence count per cell"
    }

    QUALITY_GATES {
        boolean passed "Overall pass"
        json gate1Stats "Claim validation stats"
        json gate4Stats "Confidence assessment stats"
    }

    OVERALL_ASSESSMENT {
        float truthPercentage "0-100 weighted"
        string verdict "7-point scale label"
        float confidence "0-100 weighted"
        boolean hasMultipleBoundaries
    }
{{/mermaid}}

//The complete CB pipeline analysis entity hierarchy. Stage 1 (Extract Claims) produces ##CB_CLAIM_UNDERSTANDING## with ##AtomicClaims## and Gate 1 stats. Stage 2 (Research) gathers ##EVIDENCE_ITEMs## with ##EVIDENCE_SCOPEs## from ##FETCHED_SOURCEs##. Stage 3 (Cluster) groups ##EVIDENCE_SCOPEs## into ##CLAIM_BOUNDARYs##. Stage 4 (Verdict) generates ##CB_CLAIM_VERDICTs## with per-boundary ##BOUNDARY_FINDINGs##, ##CONSISTENCY_RESULTs## (self-consistency), and ##CHALLENGE_RESPONSEs## (adversarial debate). Stage 5 (Aggregate) produces ##OVERALL_ASSESSMENT## with ##VERDICT_NARRATIVE##, ##COVERAGE_MATRIX##, and ##QUALITY_GATES##. All entities are embedded in the analysis result JSON blob (schema version ##3.0.0-cb##).//
