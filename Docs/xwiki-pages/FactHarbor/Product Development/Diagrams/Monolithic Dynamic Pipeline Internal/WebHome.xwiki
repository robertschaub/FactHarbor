{{info}}
**Fast Alternative Pipeline** — Flexible output structure not bound to canonical schema. File: ##apps/web/src/lib/analyzer/monolithic-dynamic.ts##. Streamlined analysis at lower cost, complementing the ClaimAssessmentBoundary pipeline. Updated 2026-02-19.
{{/info}}

= Monolithic Dynamic Pipeline Internal Flow =

{{mermaid}}

flowchart TB
    subgraph Entry[Entry Point]
        INPUT[runMonolithicDynamic]
        BUDGET[Initialize Budget maxIterations 4 maxSearches 6]
        TIMEOUT[Start timeout 2.5 minutes]
        SR_CLEAR[Clear SR cache]
    end

    subgraph Plan[Step 1: Plan Research]
        PLAN["[LLM] Initial analysis<br/>DynamicPlanSchema"]
    end

    subgraph Research[Step 2: Research Loop]
        SEARCH["[WEB] searchWebWithProvider()<br/>Execute search queries"]
        FETCH["[WEB] fetchSourceContent()<br/>Parallel fetch"]
        SR_PREFETCH["[EXT] prefetchSourceReliability()<br/>Batch reliability lookup"]
        BUDGET_CHK{Budget exceeded?<br/>maxSearches / maxFetches}
    end

    subgraph Analysis[Step 3: Analysis]
        PROMPT[Build dynamic analysis prompt<br/>+ source texts + reliability scores]
        LLM["[LLM] Final analysis<br/>DynamicAnalysisSchema"]
    end

    subgraph Safety[Safety Contract Enforcement]
        CITATIONS[Extract citations array]
        RAW[Store rawJson]
        VALIDATE[Validate minimum fields]
        SR_ATTACH["[EXT] Attach trackRecordScore<br/>to citations"]
    end

    subgraph Transform[Output Transform]
        DYNAMIC[Build DynamicAnalysisResult]
        REPORT[Generate experimental report]
    end

    subgraph Output[Output]
        RESULT[resultJson dynamic structure]
        MARKDOWN[reportMarkdown experimental label]
    end

    INPUT --> BUDGET --> TIMEOUT --> SR_CLEAR --> PLAN

    PLAN --> SEARCH
    SEARCH --> FETCH --> SR_PREFETCH --> BUDGET_CHK
    BUDGET_CHK -->|No — next iteration| SEARCH
    BUDGET_CHK -->|Yes| PROMPT

    PROMPT --> LLM --> CITATIONS

    CITATIONS --> RAW --> VALIDATE --> SR_ATTACH

    SR_ATTACH --> DYNAMIC --> REPORT
    REPORT --> RESULT
    REPORT --> MARKDOWN

    style PLAN fill:#e3f2fd,stroke:#1565c0,color:#000
    style LLM fill:#e3f2fd,stroke:#1565c0,color:#000
    style SEARCH fill:#c8e6c9,stroke:#2e7d32,color:#000
    style FETCH fill:#c8e6c9,stroke:#2e7d32,color:#000
    style SR_PREFETCH fill:#fff3e0,stroke:#e65100,color:#000
    style SR_CLEAR fill:#fff3e0,stroke:#e65100,color:#000
    style SR_ATTACH fill:#fff3e0,stroke:#e65100,color:#000

{{/mermaid}}

**Legend:** ##[LLM]## = LLM call ~· ##[WEB]## = Web/Search/Fetch call ~· ##[EXT]## = External service/cache boundary. (Colors remain as secondary visual cue.)

= Key Characteristics =

|= Feature |= Description
| **Flexible Output** | LLM can structure analysis freely
| **Experimental** | Labeled as experimental in UI
| **Safety Contract** | Must always include citations[] and rawJson
| **Shorter Budget** | More restrictive limits than canonical
| **No Fallback** | Does not fall back to other pipelines

= Budget Configuration =

|= Parameter |= Value |= Comparison to Canonical
| maxIterations | 4 | vs 5 (20% less)
| maxSearches | 6 | vs 8 (25% less)
| maxFetches | 8 | vs 10 (20% less)
| timeoutMs | 150000 | vs 180000 (2.5 min vs 3 min)

= Minimum Safety Contract =

**Required fields (always present):**

|= Field |= Type |= Purpose
| ##citations## | Array | Source URLs with excerpts (provenance)
| ##rawJson## | Any | Full LLM output for auditing

**Optional fields (LLM decides):**

|= Field |= Type |= Purpose
| ##summary## | String | Analysis summary
| ##verdict## | Object | label, score, confidence, reasoning
| ##findings## | Array | Key findings with support levels
| ##methodology## | String | Analysis approach description
| ##limitations## | Array | Known analysis limitations

= Output Schema =

{{mermaid}}

erDiagram
    DYNAMIC_RESULT ||--o{ CITATION : has
    DYNAMIC_RESULT ||--o| VERDICT : may_have
    DYNAMIC_RESULT ||--o{ FINDING : may_have

    DYNAMIC_RESULT {
        array citations_required
        any rawJson_required
        string summary
        string methodology
        array limitations
    }

    CITATION {
        string url_required
        string title
        string excerpt_required
        string accessedAt
    }

    VERDICT {
        string label
        number score_0_to_100
        number confidence_0_to_100
        string reasoning
    }

    FINDING {
        string point
        string support_strong_moderate_weak_none
        array sources
        string notes
    }

{{/mermaid}}

= Differences from Other Pipelines =

|= Aspect |= Orchestrated |= Mono Dynamic
| Schema | Canonical fixed | Flexible
| UI | Jobs page | Dynamic viewer
| Fallback | Default | None
| Budget | Generous | Restrictive
| Label | Comprehensive | Streamlined

= Use Cases =

**When to use Dynamic:**
* Exploratory analysis of novel claim types
* Research where canonical structure is limiting
* Comparing LLM reasoning approaches
* Debugging LLM behavior

**When NOT to use:**
* Production fact-checking
* Results that need UI rendering
* Comparing results across pipelines