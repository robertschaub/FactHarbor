= Pipeline Variant Dispatch =

{{mermaid}}
flowchart TD
    UI["Analyze UI"] --> API["API: Create Job"]
    API --> STORE["Job Store"]
    STORE --> RUNNER["Runner"]
    RUNNER --> DISPATCH{"Dispatch by<br/>pipelineVariant"}

    DISPATCH -->|"claimboundary<br/>(default)"| CB["ClaimAssessmentBoundary Pipeline<br/>claimboundary-pipeline.ts<br/>5-stage pipeline + LLM debate<br/>Production-ready (v2.11.0)"]
    DISPATCH -->|"monolithic_dynamic"| DYN["Monolithic Dynamic<br/>LLM tool-loop<br/>Flexible schema<br/>Fast alternative"]

    CB --> CB_PAYLOAD["CB Payload (3.0.0-cb)"]
    DYN --> DYNAMIC_PAYLOAD["Dynamic Payload"]

    CB_PAYLOAD --> ENVELOPE["Result Envelope"]
    DYNAMIC_PAYLOAD --> ENVELOPE

    ENVELOPE --> RESULT["Store + Display"]

    style CB fill:#c8e6c9,stroke:#2e7d32,color:#000
    style DYN fill:#e3f2fd,stroke:#1565c0,color:#000
{{/mermaid}}
