{{info}}
**Current Implementation (CB Pipeline v2.11.0+)** â€” This ERD shows the ClaimAssessmentBoundary pipeline data model as implemented in ##types.ts## and stored as JSON blobs in SQLite ##ResultJson## field.

Updated 2026-02-19 per source code audit against ##apps/web/src/lib/analyzer/types.ts## (CB pipeline interfaces: ##AtomicClaim##, ##ClaimAssessmentBoundary##, ##CBClaimVerdict##, ##OverallAssessment##, etc.).
{{/info}}

= ClaimAssessmentBoundary Data Model =

{{mermaid}}

erDiagram
    INPUT_ARTICLE ||--o{ ATOMIC_CLAIM : "extracts"
    ATOMIC_CLAIM ||--o{ SEARCH_QUERY : "generates"
    SEARCH_QUERY }o--o{ FETCHED_SOURCE : "discovers"
    FETCHED_SOURCE ||--o{ EVIDENCE_ITEM : "yields"
    EVIDENCE_ITEM |o--o| EVIDENCE_SCOPE : "has"
    EVIDENCE_SCOPE }o--|| CLAIM_BOUNDARY : "clusters into"
    EVIDENCE_ITEM }o--|| CLAIM_BOUNDARY : "assigned to"
    ATOMIC_CLAIM ||--o{ CB_CLAIM_VERDICT : "receives"
    CB_CLAIM_VERDICT }o--o{ EVIDENCE_ITEM : "cites"
    CB_CLAIM_VERDICT }o--o| CLAIM_BOUNDARY : "scoped by"
    CB_CLAIM_VERDICT }o--|| OVERALL_ASSESSMENT : "aggregates into"
    OVERALL_ASSESSMENT ||--o{ CLAIM_BOUNDARY : "presents"
    CB_CLAIM_VERDICT ||--o{ BOUNDARY_FINDING : "contains"
    BOUNDARY_FINDING }o--|| CLAIM_BOUNDARY : "per boundary"

    INPUT_ARTICLE {
        string id PK
        string inputType "text or url"
        string impliedClaim "LLM-extracted thesis"
        string articleThesis
        string backgroundDetails
        string detectedInputType "claim or article"
        string riskTier "A B or C"
    }

    ATOMIC_CLAIM {
        string id PK "AC_01 AC_02"
        string statement "The verifiable assertion"
        string category "factual evaluative procedural"
        string centrality "high medium"
        string harmPotential "critical high medium low"
        boolean isCentral "Always true (filtered)"
        string claimDirection "supports_thesis contradicts_thesis contextual"
        string_array keyEntities "Named entities referenced"
        float specificityScore "0-1 (Gate 1 min 0.6)"
        string groundingQuality "strong moderate weak none"
        json expectedEvidenceProfile "methodologies metrics sourceTypes"
    }

    SEARCH_QUERY {
        string query
        int iteration
        string focus "Evidence type sought"
        int resultsCount
        string searchProvider
    }

    FETCHED_SOURCE {
        string id PK
        string url
        string title
        string fullText "Retrieved page content"
        float trackRecordScore "0.0-1.0"
        float trackRecordConfidence "0.0-1.0"
        boolean trackRecordConsensus
        string category
        boolean fetchSuccess
        string fetchedAt
    }

    EVIDENCE_ITEM {
        string id PK "EV_001 EV_002"
        string statement "Extracted evidence text"
        string category "statistic expert_quote event legal_provision etc"
        string sourceId FK
        string sourceUrl
        string sourceExcerpt
        string claimDirection "supports contradicts neutral"
        string probativeValue "high medium low"
        float extractionConfidence "0-100"
        string claimBoundaryId FK "Assigned in Stage 3"
        string_array relevantClaimIds "Which claims this relates to"
        string scopeQuality "complete partial incomplete"
        string sourceType "peer_reviewed_study news_primary etc"
        boolean isDerivative "Cites another source study"
        string derivedFromSourceUrl "Original source URL"
        boolean derivativeClaimUnverified "Original source not fetched"
    }

    EVIDENCE_SCOPE {
        string name "Short label: WTW TTW EU-LCA"
        string methodology "Optional: ISO 14040 EU RED II etc"
        string temporal "Optional: Source data time period"
        string boundaries "What is included or excluded"
        string geographic "Source data geography"
        string sourceType "peer_reviewed_study government_report etc"
        map additionalDimensions "Domain-specific scope data"
    }

    CLAIM_BOUNDARY {
        string id PK "CB_01 CB_02"
        string name "Human-readable label"
        string shortName "Short label for UI tabs"
        string description "What this boundary represents"
        string methodology "Dominant methodology"
        string boundaries "Scope boundaries"
        string geographic "Geographic scope"
        string temporal "Temporal scope"
        float internalCoherence "0-1 consistency"
        int evidenceCount
    }

    CB_CLAIM_VERDICT {
        string id PK
        string claimId FK
        float truthPercentage "0-100"
        string verdict "7-point scale label"
        float confidence "0-100"
        string reasoning "LLM-generated explanation"
        string harmPotential "critical high medium low"
        boolean isContested
        string_array supportingEvidenceIds FK
        string_array contradictingEvidenceIds FK
        json boundaryFindings "Per-boundary signals"
        json consistencyResult "Self-consistency check"
        json challengeResponses "Adversarial challenge responses"
        json triangulationScore "Cross-boundary agreement"
    }

    BOUNDARY_FINDING {
        string boundaryId FK
        string boundaryName
        float truthPercentage "Per-boundary 0-100"
        float confidence "Per-boundary 0-100"
        string evidenceDirection "supports contradicts mixed neutral"
        int evidenceCount
    }

    OVERALL_ASSESSMENT {
        float truthPercentage "0-100 weighted"
        string verdict "7-point scale label"
        float confidence "0-100 weighted"
        boolean hasMultipleBoundaries
        json verdictNarrative "headline keyFinding limitations"
        json coverageMatrix "claims x boundaries"
        json qualityGates "gate1Stats gate4Stats"
    }

{{/mermaid}}

== Key Implementation Notes ==

**7-Point Verdict Scale:**
* TRUE (86-100%) / MOSTLY-TRUE (72-85%) / LEANING-TRUE (58-71%)
* MIXED (43-57%, confidence >= 40%) / UNVERIFIED (43-57%, confidence < 40%)
* LEANING-FALSE (29-42%) / MOSTLY-FALSE (15-28%) / FALSE (0-14%)

**EvidenceScope (optional):** Per-evidence metadata describing the methodology and boundaries of the source data. All fields except ##name## are optional (##methodology## and ##temporal## are populated when available from the source). Embedded in EvidenceItem, not a separate stored entity. Extensible via ##additionalDimensions## (Decision D4).

**harmPotential (4-level, Decision D9):** ##critical## (1.5x weight) = death/injury allegations, ##high## (1.2x) = serious but not life-threatening, ##medium## (1.0x) = moderate, ##low## (1.0x) = minimal.

**claimDirection "contextual" (Decision D6):** Evidence providing relevant background without directional stance. Renamed from "neutral" to clarify semantics.

**Derivative evidence (CB pipeline):** Evidence items that cite another source's underlying study are flagged with ##isDerivative## and ##derivedFromSourceUrl##. If the original source was not fetched, ##derivativeClaimUnverified## = true. Derivative evidence receives reduced weight in aggregation.

**VerdictNarrative (Decision D7):** Structured type with ##headline##, ##evidenceBaseSummary##, ##keyFinding##, ##boundaryDisagreements[]##, and ##limitations##. LLM-generated (Sonnet, 1 call) after weighted aggregation.

**Storage:** All data stored as JSON blob in SQLite ##ResultJson## field. Schema version: ##3.0.0-cb##.

**See Also:** [[Entity Views>>FactHarbor.Product Development.Diagrams.Entity Views.WebHome]] for multi-view field-level detail. [[Quality Gates Flow>>FactHarbor.Product Development.Diagrams.Quality Gates Flow.WebHome]] for Gate 1 and Gate 4 detail.
