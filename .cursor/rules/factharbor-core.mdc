---
description: FactHarbor core project rules — applies to all files
alwaysApply: true
---

# FactHarbor — Core Rules

> **Canonical source:** `/AGENTS.md`. This file is a summary. If rules diverge, follow AGENTS.md.

Read `/AGENTS.md` for full project rules, architecture, and domain knowledge.

## Project Overview
POC with two apps:
- `apps/api` — ASP.NET Core API (.NET 8, SQLite)
- `apps/web` — Next.js app (UI + analysis pipeline)
- `tools/vscode-xwiki-preview` — VS Code extension for XWiki previews

## Critical Terminology (ALWAYS follow)
- **ClaimAssessmentBoundary** = Evidence-emergent grouping of compatible EvidenceScopes. The top-level analytical frame. NEVER call this "context" or "scope".
- **AtomicClaim** = Single verifiable assertion extracted from user input. NEVER call this "context" or "fact".
- **EvidenceScope** = Per-evidence source metadata. NEVER call this "context".
- **EvidenceItem** = Extracted evidence from a source. NEVER call these "facts".
- **probativeValue** = Quality assessment (high/medium/low).
- **No hardcoded keywords**: Code, prompts, logic must be generic for ANY topic.
- **Input neutrality**: "Was X fair?" must yield same analysis as "X was fair" (≤4% tolerance).

## Safety
- Do not access production systems or real customer data.
- Do not change secrets/credentials or commit them.
- Avoid destructive git commands unless explicitly asked.
- Do not overwrite `apps/api/factharbor.db` unless asked.

## Conventions
- Commit messages: conventional commits `type(scope): description`.
- Platform: Windows. Use PowerShell-compatible commands.
- Solo developer + AI agents. Direct push to main is normal.

## Roles

When the user starts with "As \<Role\>" (e.g., "As Senior Developer, fix…"), follow the **Role Activation Protocol** in `/AGENTS.md`. It tells you which role definition to load from `Docs/AGENTS/Multi_Agent_Collaboration_Rules.md` §2 and which documents to read.

**Context-budget note:** If loading all Required Reading exceeds your context window, load only the role entry from §2 and defer document reads until needed for the specific task.

## Agent Exchange Protocol

On task completion, write output so other agents can pick up your work:
- **Trivial** (typo, quick fix): no file needed.
- **Standard** (bug fix, feature, config change): append entry to `Docs/AGENTS/Agent_Outputs.md`.
- **Significant** (multi-file, design decision): create `Docs/AGENTS/Handoffs/YYYY-MM-DD_<Role>_<Description>.md`.

When **starting** a task, read `Docs/AGENTS/Agent_Outputs.md` first for recent context. Full rules: `/AGENTS.md` § Agent Exchange Protocol.

## Agent Handoff
If another tool would be better for the task, say so:
- Claude Code (Opus): complex architecture, deep reasoning, plan mode
- GitHub Copilot: inline code completions
- Cline: autonomous multi-step workflows
See `/AGENTS.md` Agent Handoff Protocol for full reference.
